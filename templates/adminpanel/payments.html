{% extends 'adminpanel/base_mobile.html' %} {% block content %}
<div class="p-6">
  <h1 class="text-2xl font-heading font-bold text-primary mb-6">Payments</h1>

  <!-- Tabs (Simple JS toggle or just sections) -->

  <div class="mb-8">
    <h2
      class="text-sm font-bold text-red-500 uppercase tracking-wider mb-4 flex items-center gap-2"
    >
      <i data-lucide="alert-circle" class="w-4 h-4"></i> Pending / Failed
    </h2>
    {% if pending %}
    <div class="space-y-3">
      {% for appt in pending %}
      <div
        class="bg-white p-4 rounded-xl border border-red-100 shadow-sm flex justify-between items-center"
      >
        <div>
          <h3 class="font-bold text-primary text-sm">
            {{ appt.patient.full_name }}
          </h3>
          <p class="text-xs text-gray-500">
            {{ appt.slot.date }} • {{ appt.slot.time|date:"H:i" }}
          </p>
          <span class="text-[10px] font-bold text-red-500 uppercase mt-1 block"
            >{{ appt.payment_status }}</span
          >
        </div>
        <div class="text-right">
          <span class="block font-bold text-primary"
            >{% if appt.is_free %}<span class="text-green-600">FREE</span>{% elif appt.fee %}₹{{ appt.fee }}{% else %}<span class="text-gray-400 text-xs">Not Set</span>{% endif %}</span
          >
          <!-- Could add Mark Paid button here later -->
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <p class="text-gray-400 text-sm">No pending payments.</p>
    {% endif %}
  </div>

  <div>
    <h2
      class="text-sm font-bold text-teal-600 uppercase tracking-wider mb-4 flex items-center gap-2"
    >
      <i data-lucide="check-circle" class="w-4 h-4"></i> Recent Paid
    </h2>
    {% if paid %}
    <div class="space-y-3">
      {% for appt in paid %}
      <div
        class="bg-white p-4 rounded-xl border border-teal-50 shadow-sm flex justify-between items-center opacity-75"
      >
        <div>
          <h3 class="font-bold text-primary text-sm">
            {{ appt.patient.full_name }}
          </h3>
          <p class="text-xs text-gray-500">{{ appt.slot.date }}</p>
        </div>
        <span class="font-bold text-teal-600 text-sm"
          >{% if appt.is_free %}<span class="text-green-600">FREE</span>{% elif appt.fee %}₹{{ appt.fee }}{% else %}<span class="text-gray-400 text-xs">Not Set</span>{% endif %}</span
        >
      </div>
      {% endfor %}
    </div>
    {% else %}
    <p class="text-gray-400 text-sm">No paid history.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
